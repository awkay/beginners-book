<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Tony Kay">
<link rel="icon" type="image/x-icon" href="assets/favicon.ico">
<title>Introduction to Programming</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Introduction to Programming</h1>
<div class="details">
<span id="author" class="author">Tony Kay</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_thinking_about_information">1. Thinking About Information</a>
<ul class="sectlevel2">
<li><a href="#_without_computers">1.1. Without Computers</a></li>
<li><a href="#_with_computers">1.2. With Computers</a></li>
<li><a href="#_common_basic_data">1.3. Common Basic Data</a>
<ul class="sectlevel3">
<li><a href="#_boolean">1.3.1. Boolean</a></li>
<li><a href="#_integers">1.3.2. Integers</a></li>
<li><a href="#_decimal_numbers">1.3.3. Decimal Numbers</a></li>
<li><a href="#_characters">1.3.4. Characters</a></li>
<li><a href="#_strings">1.3.5. Strings</a></li>
<li><a href="#_arrays">1.3.6. Arrays</a></li>
</ul>
</li>
<li><a href="#_more_advanced_data_structures">1.4. More Advanced Data Structures</a>
<ul class="sectlevel3">
<li><a href="#_linked_lists">1.4.1. Linked Lists</a></li>
<li><a href="#_maps_a_k_a_dictionaries">1.4.2. Maps a.k.a. Dictionaries</a></li>
<li><a href="#_sets">1.4.3. Sets</a></li>
<li><a href="#_vectors">1.4.4. Vectors</a></li>
</ul>
</li>
<li><a href="#_nesting_data">1.5. Nesting Data</a>
<ul class="sectlevel3">
<li><a href="#_some_examples">1.5.1. Some Examples</a></li>
</ul>
</li>
<li><a href="#_making_things_happen">1.6. Making Things Happen</a>
<ul class="sectlevel3">
<li><a href="#_the_origins_of_programming_notation">1.6.1. The origins of programming notation</a></li>
<li><a href="#_adapting_to_programming">1.6.2. Adapting to Programming</a></li>
</ul>
</li>
<li><a href="#_functional_programming_workhorses">1.7. Functional Programming Workhorses</a>
<ul class="sectlevel3">
<li><a href="#_mapping_a_sequence">1.7.1. Mapping a sequence</a></li>
<li><a href="#_filtering_a_sequence">1.7.2. Filtering a Sequence</a></li>
<li><a href="#_reducing_a_sequence">1.7.3. Reducing a Sequence</a></li>
</ul>
</li>
<li><a href="#_decomposing_problems">1.8. Decomposing Problems</a></li>
</ul>
</li>
<li><a href="#_data_modelling">2. Data Modelling</a>
<ul class="sectlevel2">
<li><a href="#_changes_over_time">2.1. Changes over Time</a></li>
<li><a href="#_identity">2.2. Identity</a></li>
<li><a href="#_normalization">2.3. Normalization</a></li>
<li><a href="#_de_normalization">2.4. De-normalization</a></li>
<li><a href="#_review">2.5. Review</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The intended audience of this book is people who want to learn to program, and don&#8217;t mind that the primary programming language used in this book is Clojure. The reason for this choice is mainly that it is the language I prefer to work in, and I want others to be able to learn it.</p>
</div>
<div class="paragraph">
<p>The only real prerequisite is a basic understanding of simple Algebra, though even that isn&#8217;t a hard requirement. It will just make it easier for you to follow the computer science bits more clearly. But, you don&#8217;t even have to remember the quadratic equation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thinking_about_information"><a class="anchor" href="#_thinking_about_information"></a><a class="link" href="#_thinking_about_information">1. Thinking About Information</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_without_computers"><a class="anchor" href="#_without_computers"></a><a class="link" href="#_without_computers">1.1. Without Computers</a></h3>
<div class="paragraph">
<p>In normal everyday life there are lots of ways we represent information that do not involve computers. We use
paper, ink, film, photographic paper, sticks and sand, etc. The information can be small and transient
(a heart drawn on a sandy beach with a stick) or quite large with an emphasis on access and permanence
(The Library of Congress).  We might also be concerned with the physical space required for that information. The
use of microfilm which predated the common availability of computers was very often used to store things like
old newspapers, for example.</p>
</div>
<div class="paragraph">
<p>We humans choose the representation of this information based on many factors:
space, speed of access, permanence.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A dictionary is sorted so that you can predictably skip huge swaths of words to get to what you want.</p>
</li>
<li>
<p>Libraries order their books and provide a catalogue to optimize search AND minimize walking.</p>
</li>
<li>
<p>Newpapers were put on microfilm to dramatically reduce storage required.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the pre-digital world it is very easy to conceptualize all of these things because we can see the physical objects:
A dictionary, a library, a stick being used on a sandy beach.</p>
</div>
</div>
<div class="sect2">
<h3 id="_with_computers"><a class="anchor" href="#_with_computers"></a><a class="link" href="#_with_computers">1.2. With Computers</a></h3>
<div class="paragraph">
<p>As we moved into the digital realm, we needed to invent ways to represent this same information there.
This brave new world requires a big shift, because digital computers primarily deal with numbers. So, the
field of computer science is largely a field of applied mathematics where we search for ways to represent
real-world information as numbers. There are probably <strong>many</strong> more ways to encode data as numbers as
there are to encode them physically.</p>
</div>
<div class="paragraph">
<p>Fortunately, the same basic concerns exist in the digital realm:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Space: We&#8217;ve all probably filled up a hard drive.</p>
<div class="ulist">
<ul>
<li>
<p>Compression: (paper vs microfilm)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Speed of Access</p>
</li>
<li>
<p>Permanence (power on, power off)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When learning about information representation in computers, we&#8217;re largely learning just a few things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What low-level ways can the computer actually represent the information?</p>
<div class="ulist">
<ul>
<li>
<p>This is usually just some encoding from a easy-to-use human form to a numeric form.</p>
</li>
<li>
<p>Programming languages usually have features that were developed to make that conversion easier for programmers to do.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What creative ways can we use to organize the information for fast or convenient access?</p>
<div class="ulist">
<ul>
<li>
<p>Algorithms: a process or set of rules to be followed in calculations or other problem-solving operations
such as data encoding/decoding.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Permanence: Once we have the numbers, where do we keep them? Can we make them smaller?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Obviously, at this point and time we have gone far beyond requiring you the programmer from looking
at the low-level numbers in the computer itself. Modern programming languages do a lot to make
the basic data representation easy.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What are the common desires that we hope to meet in both the old-world representation and the digital representation?</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_common_basic_data"><a class="anchor" href="#_common_basic_data"></a><a class="link" href="#_common_basic_data">1.3. Common Basic Data</a></h3>
<div class="paragraph">
<p>All digital computers end up doing about the same thing. There are, however, hundreds of programming languages
in use today that are targeted at making particular tasks easy for a subset of the population.</p>
</div>
<div class="paragraph">
<p>For example, a spreadsheet is actually a kind of programming language (just the ability to have cells based on the
values of other cells with formulas). This language is quite useful to all sorts of people.</p>
</div>
<div class="paragraph">
<p>The BASIC programming language was invented as something beginners could easily write simple things in.</p>
</div>
<div class="paragraph">
<p>These languages are all trying to do one basic thing: Take text that <strong>you</strong> write and turn it into something the
computer can understand. These programming languages are themselves inventions of people before you
and themselves are programs whose one job is to translate one language into the language of the computer.</p>
</div>
<div class="paragraph">
<p>As such, all of these language have invented things that you type that can be turned into raw data for
the computer.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll cover a few of those here.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Since different programming languages have different things you might "type" in order to represent data, do
you imagine that many of these languages would share some commonalities? Name some that you would expect to
be close or identical in many programming languages.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_boolean"><a class="anchor" href="#_boolean"></a><a class="link" href="#_boolean">1.3.1. Boolean</a></h4>
<div class="paragraph">
<p>Basically a "true" or "false". The concept of logical truth. Booleans are common to all programming languages. The boolean type is primarily used to either track if something is true (or not), or as the result of things like comparisons which can then be used to make decisions in programs.</p>
</div>
<div class="paragraph">
<p>For example, in languages list C, Java, and Javascript <code>2 &gt; 1</code> evaluates to <code>true</code> to indicate that
indeed 2 is greater than 1.</p>
</div>
<div class="paragraph">
<p>There is a surprising complication that is common to many languages, though. Most programming languages have a set of rules (for convenience) for using other values in the program in place of the pure <code>true</code> or <code>false</code>. For example in C the number 0 is considered the same as false, but all other numbers are true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="predefined-type">int</span> i = <span class="integer">3</span>;

<span class="keyword">if</span>(i)
  println(<span class="string"><span class="delimiter">&quot;</span><span class="content">TRUE</span><span class="delimiter">&quot;</span></span>);
<span class="keyword">else</span>
  println(<span class="string"><span class="delimiter">&quot;</span><span class="content">FALSE</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>will print "TRUE", but if <code>i</code> were set to 0 it would print false.</p>
</div>
<div class="paragraph">
<p>In Clojure, the symbols <code>true</code> and <code>false</code> are literals you can use for this purpose; however, the special value <code>nil</code> (which means no result) is considered synonymous with <code>false</code>, while every other value (including numeric 0) is considered synonymous with <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Basically you just have to memorize the rules for your programming language.</p>
</div>
</div>
<div class="sect3">
<h4 id="_integers"><a class="anchor" href="#_integers"></a><a class="link" href="#_integers">1.3.2. Integers</a></h4>
<div class="paragraph">
<p>Whole (signed) numbers are usually just typed as-is: 4 means 4.</p>
</div>
<div class="paragraph">
<p>Computers actually store integers using binary, which means the low-level representation uses
math based on powers of two. Because of this we sometimes use alternative ways of typing them
into a programming language. The base-10 numbers are always written as normal numbers.</p>
</div>
<div class="paragraph">
<p>Sometimes we switch to using base-16, sometimes called hexidecimal, or just hex. There
are two reasons for this: It is shorter to type, and we can more easily convert the number to the
underlying bit pattern because each digit of a hex number represents 4 bits.  The letter <code>A</code> is used
for the "extra" digit <code>10</code>, <code>B</code> = <code>11</code>, up to <code>F</code> = 15 (for a total of 16 possibilities per digit).</p>
</div>
<div class="paragraph">
<p>If you were trying to write down a number that matched a particular "bit pattern" in computer memory
you might want to do the conversion like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We usually write hex in programming languages by prefixing the digits with <code>0x</code>. So in this example, the
hex number is typed into the computer as <code>0x5A7</code>. If you use a programmer&#8217;s calculator you can convert this
to decimal.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What is 0x5A7 in decimal?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Octal (only using digits 0 to 7) happens to align on 3-bit boundaries. In programming languages octal
can usually be typed in by prefixing the number with <code>0</code>. For example, <code>013</code> is an octal number in
many languages, NOT a decimal. Convert the bit pattern from the example in this section into octal.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_decimal_numbers"><a class="anchor" href="#_decimal_numbers"></a><a class="link" href="#_decimal_numbers">1.3.3. Decimal Numbers</a></h4>
<div class="paragraph">
<p>Numbers that have a decimal point have to be stored using a different bit pattern than integers. We won&#8217;t
cover the details of that here, but most programming languages support two different "sizes" of decimal
numbers. The term used for these is usually "floating point number" ("float" for short) and
"double precision floating point number" ("double" for short).</p>
</div>
<div class="paragraph">
<p>How standard floating point numbers are stored and work in computers is defined by an IEEE-754 standard.
Any language you are likely to work in is running on a computer that uses this standard, though
there can be some variance as your platform gets exotic.</p>
</div>
<div class="paragraph">
<p>Programming languages usually define "float" as a 32-bit version, which can store numbers with
7 digits of precision, and can slide the decimal place left/right about 38 places. A "double" uses
64 bits, and has 15 digits of precision, and can slide the decimal place roughly 308 places (i.e.
the biggest number is about \$10^308\$)</p>
</div>
<div class="paragraph">
<p>A suffix is often supported in programming languages when typing a number if you wish to clarify
the representation you want.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What you type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What you get</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(float 3.5)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double (no way to get float)</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>In Clojure, would the value 3.22 be treated as <code>true</code> or <code>false</code> if evaluated as a boolean? What about 0?</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_characters"><a class="anchor" href="#_characters"></a><a class="link" href="#_characters">1.3.4. Characters</a></h4>
<div class="paragraph">
<p>A character is a glyph (usually appearing on, or producible by a keyboard) that has some human meaning. The
early American computers could only support the characters used in North America. The ASCII standard was
the first mapping from human glyphs (like the capital letter A) to numbers (65).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What you&#8217;d type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'A'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C++</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'A'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ClojureScript</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'A'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>as you can see many languages have overlap in how you&#8217;d represent a single glyph.</p>
</div>
<div class="paragraph">
<p>ASCII is just one <strong>encoding</strong> (glyph to number). Today most modern languages are meant to be used internationally.
Unfortunately, until a standard was reached globally, every country in the world invented their own encoding. This
was a real mess for a while. You can go look at these older (and still supported) encodings, such as
the one that was used for <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-7">greek</a>.</p>
</div>
<div class="paragraph">
<p>Most programmers today use Unicode. For space constraints most Unicode is stored as UTF-8, which just means that
each glyph you type uses at least 8 bits (one byte) but can use more bytes if needed. Chinese has many thousands of glyphs,
so to truly represent every possible glyph may require a few bytes. UTF-8 is an example of two things: the encoding of
information, and also the <strong>compression</strong> of that information.  UTF-8 takes no more space than ASCII if you only use
plain English, but if you use Chinese it automatically uses the additional space needed store the larger
numbers that those glyphs encode to.</p>
</div>
<div class="paragraph">
<p>For example, in UTF-8, an 'A' is still the number 65 (a single byte), but the greek letter π is stored as
two bytes holding the numbers 207, followed by 128.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Type "UTF for π" into google search. It should show you the UTF-8, 16, and 32 values. Do you notice anything odd
between those? What? If you see something odd, can you explain it?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>What is the decimal number used in UTF-8 (and ASCII) for the lower-case letter <code>a</code>? What&#8217;s the numerical difference
between <code>A</code> and <code>a</code>? Think about that in binary: How might that be significant?</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_strings"><a class="anchor" href="#_strings"></a><a class="link" href="#_strings">1.3.5. Strings</a></h4>
<div class="paragraph">
<p>The word "string" in computing is playing on the idea of "stringing things together". Basically a string in
a computer is simply a linear sequence of characters, which either starts with a "length", or ends with a
special termination value (usually called NUL, which is almost always the number 0).</p>
</div>
<div class="paragraph">
<p>So, the string that contains three `A&#8217;s in a row would be stored in the computer either as the length
followed by the character codes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>or more commonly as the characters with a NUL termination:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You will often hear the latter called "null-terminated strings". You will often hear or see this idea
discussed using the terms/symbols null, NUL, ø.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There are, of course, more ways of storing strings in computers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As far as what <strong>you</strong> type in the programming language, it is usually the sequence of glyphs surrounded by
<code>"</code>. E.g. "Hello world" is typically a null-terminated string containing those character codes.</p>
</div>
<div class="paragraph">
<p>All programming languages have a way to treat a string as a sequence of some sort. In other words, you can
usually access the individual characters, or grab a range of them.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What you type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What you get</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Hello world"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An ASCII encoded, null-terminated string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java/Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Hello world"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A UTF-8 encoded, null-terminated string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Hello world"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A UTF-16 (!!!), null-terminated string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Hello world'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A UTF-16 (!!!), null-terminated string</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that in Javascript there are <strong>two</strong> ways to get a string. That language expects there to be the need
to often embed quotes within quotes, so it was deemed convenient to be able to type <code>"he&#8217;s over there"</code>
or <code>'"Hello", she said.'</code></p>
</div>
<div class="paragraph">
<p>Anytime you need to embed the "start quote" character within a string, most langauges simply have you
prefix it with <code>\</code>. For example, in Java or Clojure you&#8217;d type <code>"\"Hello\", she said"</code> to get a string
that also includes the literal character <code>"</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>We know that in Java/Clojure <code>"AA"</code> is represented in memory as the null-terminated string of numbers 65, 65, 0.
What would be the sequence of in-memory numbers for the string <code>"A π"</code>? Hint: Remember to look up the encoding for
the space!</p>
</dd>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>In Clojure what would you type in to make a literal string out of:
<code>Javascript uses both ' and " to surround strings</code>.</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Can you guess why strings are usually stored with NUL termination instead of a prefix length? What
do you think are the advantages/disadvantages of these two ways of storing strings?</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_special_characters_in_strings"><a class="anchor" href="#_special_characters_in_strings"></a><a class="link" href="#_special_characters_in_strings">Special Characters in Strings</a></h5>
<div class="paragraph">
<p>Strings are one of the most commonly-used things in programming, so it pays to know a little more about them.
In <strong>most</strong> programming languages you <strong>cannot</strong> put a line break inside of the string. For example, this is an
error in Java, Javascript, C, C++, and most other languages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="string"><span class="delimiter">&quot;</span><span class="content">This is a test
 Hello!</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Clojure and Clojurescript are <strong>ok</strong> with putting a literal new line in a string like that.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Instead, most programming languages define a way in which you can embed control characters in a more visible way. The
method of doing this is <strong>just</strong> like the method for embedding a quote within quotes: use a <code>\</code>. The most common
special embedded things are: <code>\n</code> (newline), <code>\r</code> (Windows, carriage return, old typewriter garbage), <code>\t</code> TAB. In
many programming languages the special <code>\u0000</code> means to use a literal unicode value (e.g. π can be typed into
a string as "\u03C0" in Java and Clojure).</p>
</div>
<div class="paragraph">
<p>So, in Java you&#8217;d change the broken example above to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="string"><span class="delimiter">&quot;</span><span class="content">This is a test</span><span class="char">\n</span><span class="content"> Hello!</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What would you type into Java in order to get the words "Happy Birthday Sally" on three different lines? It turns out
this answer is slightly different on Windows vs. everything else (OSX, Linux, UNIX). What is it on Windows?</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_arrays"><a class="anchor" href="#_arrays"></a><a class="link" href="#_arrays">1.3.6. Arrays</a></h4>
<div class="paragraph">
<p>Arrays are exactly like strings (they are a sequence of things that are adjacent
in the computer&#8217;s memory), except they are something besides characters.</p>
</div>
<div class="paragraph">
<p>Technically an array is: A fixed-length sequence of equal-sized entries, laid out
so the values are adjacent and sequential in computer memory.</p>
</div>
<div class="paragraph">
<p>Making an array varies by language. For example, to create an array of floats called <code>arr</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make a new array called <code>arr</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float arr[] = new float[3];</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">var arr = new Float32Array(3);</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(def arr (float-array 3))</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>which results in this in the computer&#8217;s memory:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/arr1.png" alt="arr1" width="220" height="154">
</div>
</div>
<div class="paragraph">
<p>Where the numbers to the left of each box are the <strong>offset</strong> of a given entry.
Programming languages will give you a way to read/write the cells of an array
by this "abstract offset".</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get an element from an array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set an element of an array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b = arr[1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arr[1] = 3.4f</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b = arr[1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arr[1] = 3.4f</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b = arr[1]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arr[1] = 3.4f</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(aget arr 1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(aset arr 1 3.4f)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>and after the set operation (e.g. <code>arr[1] = 3.4f</code>) we&#8217;ll have this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/arr2.png" alt="arr2" width="220" height="154">
</div>
</div>
<div class="paragraph">
<p>To advance your understanding, note that each byte
of computer&#8217;s memory is actually "indexed" by its relative location in the computer chip. So, if
you have 1GB of memory (1 billion bytes), then by definition you have a byte with address 0,
a byte with address 1, 2, 3, &#8230;&#8203;, 1 billion.</p>
</div>
<div class="paragraph">
<p>When you create an array, you&#8217;re asking the programming language to find a block of this memory that
is not currently in use, and then you&#8217;re asking it to produce the correct instructions to read/write
the data in that block. So, say our computer had some free space at address 1024, then
our array of floats actually looks something like this in memory:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/arrdetail.png" alt="arrdetail" width="610" height="224">
</div>
</div>
<div class="paragraph">
<p>The idea of a linear sequence of the "same kind of" things in the computer&#8217;s memory is
actually quite useful for a few reasons:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It allows you to store more than one thing as a "group"</p>
</li>
<li>
<p>Since the items are all the same size the computer can figure out exactly where
ANY element is with just an offset (\$position = offset * size_{entry}\$).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This allows you to "jump" to any spot in the array in the computer&#8217;s memory in constant time
and computers are quite good at this sort of thing. Accessing a given direct address with a primitive
(in this case float) format can usually be done in a matter of nanoseconds! This means you
can literally do billions of these operations per second!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
An operation that can be run with some small fixed-size number of instructions is said to run
in "constant time". This is often annotated in computer science as O(1). The idea is to express
the relative speed of something (given an idealized computer) relative to other kinds of operations
that might produce the same result. Constant time algorithms are the fastest, but comparing
two different constant time algorithms, of course, might yield a different actual run-time. For example,
the function to convert Fahrenheit to Centigrade is a constant time function, but since it involves
a few math operations it might be a bit slower than an array access.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Arrays are the most basic <strong>collection</strong> of data in most programming languages, and while very
fast and compact they have some drawbacks (the bonus question has you explore this).
Newer programming languages support them for their size/speed, but usually define and use
more advanced collections for various reasons.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Do arrays have to be contiguous in memory?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>If you need to "expand" an array (i.e. you run out of space and need to hold more things)
and the computer has no free memory <strong>right next to</strong> the old array, what would you have
to do in order to be able to use a bigger array? If the array way already quite large
would this cause you concerns? Why?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Say you have an array that can hold 1000 float. You&#8217;ve initialized 600 of them (so the last 400
don&#8217;t yet have values you care about). You realize that you to INSERT an element at offset
50, but you don&#8217;t want to <strong>overwrite</strong> the value that is there. You want to keep the existing good
data. What do you have to do? Thoughts about this?</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_relation_to_strings"><a class="anchor" href="#_relation_to_strings"></a><a class="link" href="#_relation_to_strings">Relation to Strings</a></h5>
<div class="paragraph">
<p>Arrays and strings, as you might have guessed, are very similar.</p>
</div>
<div class="paragraph">
<p>In fact, some programming languages (C and C++) explicitly <strong>use</strong> arrays of characters AS
strings in their formal definition.</p>
</div>
<div class="paragraph">
<p>Many more modern languages define strings as a separate conceptual thing, even though they
are usually stored as an array of characters internally.</p>
</div>
<div class="paragraph">
<p>The reason we treat arrays and strings as different things in most languages has to do with how
we&#8217;ll commonly use them. Strings are almost always used for human-readable content that
will be shown with some font on a display or printer, or for portions of input documents that the
computer will process by interpreting the data through a character encoding.</p>
</div>
<div class="paragraph">
<p>So, you can think of a string as an "array of characters" (though your programming language may
not allow you "program it that way" for safety).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Say you write a program to process the data in the file. What do you suppose happens if your program
assumes that data is encoded as UTF-8 string data, but the file is actually encoded with
a historical encoding like the one used for greek?</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_more_advanced_data_structures"><a class="anchor" href="#_more_advanced_data_structures"></a><a class="link" href="#_more_advanced_data_structures">1.4. More Advanced Data Structures</a></h3>
<div class="paragraph">
<p>Formally, a data structure in programming is an invention of Computer Science aimed at the
efficient storage and retrieval of information. Arrays, as covered in the prior section,
are perhaps the most basic data structure.</p>
</div>
<div class="paragraph">
<p>If you did the exercises then you already know the weaknesses of arrays:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is expensive to insert something into the middle. (you have to copy the "tail" over 1 if you have space,
and otherwise copy the whole thing)</p>
</li>
<li>
<p>It is expensive when you run out of the pre-allocated size of the array (you have to copy the entire thing
to a new place)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Another weakness of arrays is their limited organization. You have numerical offsets as keys. What if you&#8217;re
trying to look up things by a person&#8217;s name, or a book&#8217;s title? How would you convert a "name" into an
"offset"? (Actually, there&#8217;s a good and useful answer to that, which is yet another fun invention of
Computer Science).</p>
</div>
<div class="paragraph">
<p>But suffice to say that arrays are not the best tool for every job. In fact, arrays are often only used in
high performance applications where their limitations can be dealt with in a constrained way.</p>
</div>
<div class="paragraph">
<p>So, what else do we have in our toolbox? Let&#8217;s see.</p>
</div>
<div class="sect3">
<h4 id="_linked_lists"><a class="anchor" href="#_linked_lists"></a><a class="link" href="#_linked_lists">1.4.1. Linked Lists</a></h4>
<div class="paragraph">
<p>A linked list, when drawn out, is a very simple thing:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/linkedlist.png" alt="linkedlist" width="400" height="98">
</div>
</div>
<div class="paragraph">
<p>We allocate individual "chunks" of memory that we refer to as "nodes". Each node has internal storage that can
hold a value. In Clojure, the type of this value can be "anything".  Each node also has a "pointer" to the
next chunk of memory that holds data for the list. We "terminate" the list the same way we terminate strings. With
a value we refer to as "null" (in clojure "null" is written as <code>nil</code>).</p>
</div>
<div class="paragraph">
<p>The memory for a node can be allocated at any time, and because
of the "pointer" structure, it need not be contiguous in memory like it has to be for an array.</p>
</div>
<div class="paragraph">
<p>So, the clear advantage of a linked list is that it can expand in "constant time". There is no need to copy
any old elements anywhere. Simply make a new node and point it&#8217;s "next node" pointer at the old list:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/linkedlistadd.png" alt="linkedlistadd" width="480" height="98">
</div>
</div>
<div class="paragraph">
<p>It is also technically possible to put a new bit of data "in the middle" by just re-routing the pointers:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/linkedlistinsert.png" alt="linkedlistinsert" width="400" height="168">
</div>
</div>
<div class="paragraph">
<p>Of course there are down-sides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To "read" a node at some offset, you must manually step through each node, tracking how many steps you&#8217;ve taken,
and then read the data from the node you eventually get to.</p>
</li>
<li>
<p>Inserting a node or appending to the "end" are also proportional to the number of items in the list.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This concept of a process taking some number of steps that is proportional to the number of data items is known as a "linear time algorithm", which basically means each such operation costs an amount of time proportional to the
size of the data being stored. This is usually written O(n) to indicate it runs in a time proportional to the number
<code>n</code> of items in the target. Notice that like O(1) this is simply used to specify a rough idea about relative speed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In languages like Java and C++ linked lists are provided in several variants, and they are fully editable at
runtime. You don&#8217;t have to manage the "pointers", because these pre-written implementations do all the hard work
and just give you ways of doing the operations abstractly.</p>
</div>
<div class="paragraph">
<p>In Clojure the <code>list</code> function can be used to make a list, and the <code>cons</code> function can be used to make a
<strong>new</strong> list whose <strong>tail</strong> is some existing list. The reason for this is that in Clojure once data is created, it
is not allowed to be changed. This had all sorts of advantages which we will discuss later, but it means that
Clojure lists don&#8217;t allow "middle of the list" inserts.</p>
</div>
<div class="paragraph">
<p>So in Clojure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">def</span> <span class="function">list1</span> (<span class="keyword">list</span> <span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/list1.png" alt="list1" width="370" height="98">
</div>
</div>
<div class="paragraph">
<p>makes a new linked list called list1.</p>
</div>
<div class="paragraph">
<p>and this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">def</span> <span class="function">list2</span> (<span class="keyword">cons</span> <span class="integer">10</span> list1))</code></pre>
</div>
</div>
<div class="paragraph">
<p>makes a new NODE and points it at the other list:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/list2.png" alt="list2" width="370" height="196">
</div>
</div>
<div class="paragraph">
<p>In data structure theory this is known as <strong>structural sharing</strong>, and
has two advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users of <code>list1</code> can <strong>absolutely rely</strong> on the value of the list <strong>never</strong>
changing at runtime. There is no operation that can corrupt that value. The
"name" <code>list1</code> could technically be re-bound to point at some completely
<strong>new</strong> value, but anyone that has the original list can trust it not to change. In languages like Java, lists are <strong>mutable</strong>, meaning that a program
has no such guarantees, and that is a common source of problems
and confusion.</p>
</li>
<li>
<p>New lists can be based on old ones, saving memory. The runtime of
the program <strong>looks</strong> like it has a list of length 3, and a different list
of length 4; however, the truth is that it has one list with <strong>two names</strong>
that happen to be bound to different locations within the same list!</p>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Why can&#8217;t Clojure allow you to put things at the end of an existing list?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>What (conceptually, not as code) would you need to do to make a
new list in Clojure that had a new item at the <strong>end</strong>?</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_maps_a_k_a_dictionaries"><a class="anchor" href="#_maps_a_k_a_dictionaries"></a><a class="link" href="#_maps_a_k_a_dictionaries">1.4.2. Maps a.k.a. Dictionaries</a></h4>
<div class="paragraph">
<p>So far we&#8217;ve seen two data structures (arrays and lists) which store
things linearly. Arrays give direct indexed access, and lists require
a linear walk. Arrays are expensive to expand, but lists can be
expanded (in some ways) at lower expense.</p>
</div>
<div class="paragraph">
<p>But what about the case of a simple English Dictionary? Historically
we&#8217;ve built those by alphabetizing the words and storing them in
linear order, right?</p>
</div>
<div class="paragraph">
<p>So, technically we could use an array or list to make such a thing,
but there are some problems with doing that.</p>
</div>
<div class="paragraph">
<p>An array, for example, must have <strong>equal-sized</strong> elements (remember that
the indexed access requires jumping to a calculation position in memory
based on the element size). We could store just the word and a pointer
to a string at each array element:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/arrayofpointers.png" alt="arrayofpointers" width="330" height="168">
</div>
</div>
<div class="paragraph">
<p>but then at least the word itself would have to fit in each element (so
there would be some wasted space for most entries).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>If our dictionary was structure as above, what would be the computational cost of putting in a new word (if we were trying to maintain a sorted order)?</p>
</dd>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>If you used a linked list instead of an array, what would that look like?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If the array is sorted, then one way of finding a definition is to search by what is known as a "binary search". A binary search is one where basically you look at the "middle" and see if you&#8217;ve gone too far or not. This lets you eliminate half of things at a time. Just imagine you are looking for the word "Joker" in a paper dictionary. You open the dictionary in the approximate middle, and see you&#8217;ve hit the word "knight". So, you ignore the latter half of the dictionary, and look in the rough middle of the other half. You find "dry". Now you eliminate the "earlier part" of that, split again, etc.  As a human you might tune this a bit (you might say "I know that J comes just before K, so I&#8217;ll just page back a bit), but you get the general principle.</p>
</div>
<div class="paragraph">
<p>So, say our dictionary contains 1000 words, and we search it like the above. The first step eliminates 500 things. Then the next step eliminates another 250. Then 125, and so on. At some point it is faster just to do a linear walk of what remains, but at the limit this takes \$log_2 N\$ steps.</p>
</div>
<div class="paragraph">
<p>So, if we had 1 million words, such a search takes (in the very worst case) about \$\floor{log_2 1000000} = 19\$ steps, but many times we&#8217;ll find the word earlier than that. Still, it is much faster than a pure linear search!</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Consider the answers to the two prior quiz questions. Now that you&#8217;ve seen binary search, what do you think of the possible linked-list implementation? Why?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Computer science has spent a lot of time thinking up alternative answers to this problem. Fortunately, they&#8217;ve been doing that for 70+ years so you don&#8217;t have to invent these things, and modern progamming languages just "come with" various versions that are good for this task, in various different ways. Some are faster at lookups, some are faster at inserts, some behave better over time when there have been lots of edits, etc.  There are a <strong>lot</strong> of trade-offs that you could consider.</p>
</div>
<div class="paragraph">
<p>In Clojure, there is a general-purpose version of this data structure which can
be created using curly braces, where the "key" and "value" pairs are simply listed
in order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">definition1</span><span class="delimiter">&quot;</span></span>
 <span class="string"><span class="delimiter">&quot;</span><span class="content">as</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">definition2</span><span class="delimiter">&quot;</span></span>
 <span class="string"><span class="delimiter">&quot;</span><span class="content">ask</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">definition3</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Javascript uses a similar but more limited version that looks very similar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{<span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">definition1</span><span class="delimiter">&quot;</span></span>,
 <span class="key"><span class="delimiter">&quot;</span><span class="content">as</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">definition2</span><span class="delimiter">&quot;</span></span>,
 <span class="key"><span class="delimiter">&quot;</span><span class="content">ask</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">definition3</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and if you&#8217;re curious what it looks like in Java (and many other similar languages), it is something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; m = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt;();
m.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">definition1</span><span class="delimiter">&quot;</span></span>);
m.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">as</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">definition2</span><span class="delimiter">&quot;</span></span>);
m.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">ask</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">definition3</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that in Javascript the "key" always has to be a string, but in Clojure the key can be absolutely anything. Also notice that in Java there is no short/concise way to type out a map.  You have to make one (that&#8217;s what <code>new</code> does), and then stick
things in one-at-a-time.</p>
</div>
<div class="paragraph">
<p>General-purpose maps typically have the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding an entry takes time proportional to the \$log N\$ where N is the number of things already in the map.</p>
</li>
<li>
<p>Removing an entry is similar.</p>
</li>
<li>
<p>The <strong>overhead</strong> (cost of the data structure&#8217;s management) for storing things is relatively low.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As such, maps are a great way to organize data that needs to be accessed</p>
</div>
<div class="paragraph">
<p>In most languages (Java, Javascript, C++, etc.) maps are mutable. You can change their content dynamically. This has the same potential problems we discussed with linked lists.</p>
</div>
<div class="paragraph">
<p>Maps in Clojure, like linked lists in Clojure, are immutable. They cannot be changed once created. However, they have the same exact benefits as lists: the way they are constructed allows for structural sharing, so creating a new version of a map with some difference is a very fast operation, which is also very efficient on space.</p>
</div>
<div class="paragraph">
<p>Creating a new map from an old one, where you want to add entries, can be done with <code>assoc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">def</span> <span class="function">m1</span> {<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">definition1</span><span class="delimiter">&quot;</span></span>})
(<span class="keyword">def</span> <span class="function">m2</span> (<span class="keyword">assoc</span> m1
          <span class="string"><span class="delimiter">&quot;</span><span class="content">as</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">definition2</span><span class="delimiter">&quot;</span></span>
          <span class="string"><span class="delimiter">&quot;</span><span class="content">ask</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">definition3</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>If you run the two things in the prior code block, and then look at the value of <code>m1</code>, what would you expect to be in there?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>But in Java, for example, you can change the map in-place as you saw in the prior Java code block.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll learn some additional ways of working with maps in this section&#8217;s exercises.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>We mentioned earlier that maps in Clojure can use anything for keys and values. Can you think of a few different places where something other than strings as keys would be useful?</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_clojure_keywords"><a class="anchor" href="#_clojure_keywords"></a><a class="link" href="#_clojure_keywords">Clojure Keywords</a></h5>
<div class="paragraph">
<p>This is a good time to talk about Clojure <strong>keywords</strong>. Remember when we talked about storing the "words" of the dictionary in an array earlier? The weakness, as you recall, was a bit of wasted space, but we actually didn&#8217;t mention another downside: When you are searching for a word, you have to ask the computer to compare the word you want with the word that is in the dictionary, right? I mean how else will it know if it has found what you want?</p>
</div>
<div class="paragraph">
<p>Remember that strings are just arrays of characters. So, if we&#8217;re looking for the word "knight" in our map, each step of the search has to do a character-by-character comparison (because that is all a CPU can actually do!).</p>
</div>
<div class="paragraph">
<p>This means that a string comparison is an O(N) algorithm! The longer the word, and the more times we have to compare it, the worse things get.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/diag-df7e0bdc48e52e09209f26c13667339d.png" alt="Diagram" width="360" height="182">
</div>
<div class="title">Figure 1. Comparing two strings. We have to do three comparisons to prove these are not the same.</div>
</div>
<div class="paragraph">
<p>But what if there were a way for us to pre-encode something with human meaning into a number? That would mean that we could store our dictionary keyed by <strong>numbers</strong>, and then when we want to search we could encode our desired word into a number first, and do the search that way. This could be an improvement in performance, while also not really limiting our expressiveness.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What does this last sentence mean by expressiveness?  I.e. Why does encoding an arbitrary string as a single number help expressiveness?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Of course there&#8217;s a limitation: you would not want to encode all the possible strings in the world as numbers, because that would require an arbitrarily large amount of space, and huge numbers! So, we&#8217;ve been leading you astray just a bit. We do <strong>not</strong> use keywords as a way to, say, encode the English language words in a map of the English Language Dictionary. In fact, we <em>would</em> actually use strings as the keys in this case because it is cost-prohibitive to encode all of English as pre-defined numbers. But hopefully, you&#8217;ve kind of seen the goal: when we are representing arbitrary, but semantically distinct, values within a map it is nice to have an efficient way to give a key an arbitrary name that cal also behave better at runtime.</p>
</div>
<div class="paragraph">
<p>Thus, the purpose of keywords is just that: To allocate numbers for names that you want to use for your program&#8217;s data.</p>
</div>
<div class="paragraph">
<p>In Clojure, keywords start with a <code>:</code>, and are followed by an optional <em>namespace</em> (a dot-separated sequence of glyphs), an optional <code>/</code> to indicate the end of the namespace, and then more non-whitespace glyphs for the name.</p>
</div>
<div class="paragraph">
<p>Some examples are <code>:name</code>, <code>:something/other</code>, and <code>com.google/search-string</code>.</p>
</div>
<div class="paragraph">
<p>The <strong>namespace</strong> of a keyword is meant as a means of categorization, and the name is meant as a means of identity. For example, let&#8217;s say you want to store details about a person.  If you just used the keyword <code>:name</code> then it is ambiguous if you mean a person&#8217;s name, or a place&#8217;s name, or a dog&#8217;s name. The namespace allows us to clarify our intended meaning:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Fido</span><span class="delimiter">&quot;</span></span>}

{<span class="symbol">:dog/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Fido</span><span class="delimiter">&quot;</span></span>}

{<span class="symbol">:person/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Allison</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The underlying maps in all of these cases will encode the keyword into an efficient constant value that is fast to compare, but it maintains the readability and meaning to you the programmer!</p>
</div>
<div class="paragraph">
<p>The namespace also makes it possible to put related keys into the same map, even if they have the same "name" portion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:person/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Allison</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:dog/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Fido</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:cat/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Max</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There is a recommendation if you write software in Clojure that might be used by others. The recommendation is that for any data that can be seen by other programmers, you should use namespaces for your keywords that contain a reverse domain name that you own (or perhaps uses a reverse domain name that clarifies the context of the information). Some examples might include <code>:com.google/search-string</code>, <code>:gov.us.irs/social-security-number</code>. These help ensure that if multiple programmers place data into the same map that they don&#8217;t accidentally overwrite each other!
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Say you want to represent a 3d cartesian coordinate in Clojure. Give some examples of different ways you might use maps to do that. Of the examples you generate, indicate the circumstances where you might choose that one over any others. Hints: would you use namespaces? What kinds of numbers might you use?</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sets"><a class="anchor" href="#_sets"></a><a class="link" href="#_sets">1.4.3. Sets</a></h4>
<div class="paragraph">
<p>A set is a mathematical construct that has a well established set of useful operations. As a data structure a set is a collection of items where duplicates are not allowed. The performance characteristics are such that adding, removing, and asking "is this value in the set?" are fast operations.</p>
</div>
<div class="paragraph">
<p>In Clojure these are created using curly braces as well, but by prefixing them with the <code>#</code> character.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">#{<span class="integer">1</span> <span class="integer">2</span> <span class="symbol">:a</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>They can contain any kind of value.</p>
</div>
<div class="paragraph">
<p>One of the primary operations on a set in Clojure is <code>contains?</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">contains?</span> #{<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>} <span class="integer">1</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>which returns true if the item is in the set, and false otherwise.  There are, of course, set operations from mathematics like union, subtraction (or difference), intersection, etc.</p>
</div>
<div class="paragraph">
<p>Sets are not nearly as commonly used as maps, but they do come up with regularity.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Sets are usually unordered (you can make sorted ones if you want, but that isn&#8217;t the default).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_vectors"><a class="anchor" href="#_vectors"></a><a class="link" href="#_vectors">1.4.4. Vectors</a></h4>
<div class="paragraph">
<p>Clojure has an additional type that is similar in behavior to an array called a <code>vector</code>.  Internally it has a rather complex implementation that is meant to give performance that gets reasonably close to that of an array, with none of the drawbacks, all while have that same immutable guarantee that all the other Clojure data structures have!</p>
</div>
<div class="paragraph">
<p>We write vectors use square brackets, with space between each item like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">[<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span> <span class="symbol">:a</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span> <span class="float">42.5</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>as you can see vectors can hold any kind of data.</p>
</div>
<div class="paragraph">
<p>Making a new vector with an item changed is done just like with maps, using <code>assoc</code>, but instead of the map entry key, we give an offset like for arrays:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">def</span> <span class="function">a</span> [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>])
(<span class="keyword">def</span> <span class="function">b</span> (<span class="keyword">assoc</span> a <span class="integer">1</span> <span class="symbol">:x</span>))</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What&#8217;s in <code>a</code> after this code runs?</p>
</dd>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What&#8217;s in <code>b</code> after this code runs?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can pull a value from a vector with the same function you use on maps (<code>get</code>). You just use an offset
as the "key":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">get</span> a <span class="integer">1</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The exercises will let you experiment more with vectors.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nesting_data"><a class="anchor" href="#_nesting_data"></a><a class="link" href="#_nesting_data">1.5. Nesting Data</a></h3>
<div class="paragraph">
<p>Now that we&#8217;ve got the general idea of what data structures are, we should talk more about the fact that they can be combined with each other. Languages like Clojure and Javascript are  particularly good at this because the values in their data structures can be anything. Some programming languages require the programmer to be more specific about what they put in a data structure. There are good reasons for both, actually. In languages like Clojure the general philosophy is that the power of the flexibility is better, whereas languages that have the programmer pre-declare what will go inside a data structure are easier to build tools for that can detect certain classes of errors early.</p>
</div>
<div class="paragraph">
<p>There are continuous debates about which approach is "right", and as with any such debate the answer is almost certainly "it depends". An experienced developer who has worked with both is often hard-pressed to define exactly when they would choose one over the other with objective criteria.</p>
</div>
<div class="paragraph">
<p>One place where Clojure&#8217;s approach has some clear wins is when representing data. The ease and clarity you can get for a relatively complex bit of data, while also ensuring a measured amount of correctness, is quite good.</p>
</div>
<div class="paragraph">
<p>Consider an example. Let&#8217;s try to do the exact same thing in Java and Clojure just to get an idea of the basic difference just in readability. First, Clojure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:person/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sam</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:person/age</span> <span class="integer">22</span>
 <span class="symbol">:person/address</span> {<span class="symbol">:address/street</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main</span><span class="delimiter">&quot;</span></span>}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and now the Java (note the use of Object, which is how you tell Java you want to be able to
use "anything". Technically, this is about as close to a 1-to-1 comparison of the exact same operations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">Object</span>, <span class="predefined-type">Object</span>&gt; person = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">Object</span>,<span class="predefined-type">Object</span>&gt;();
<span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">Object</span>, <span class="predefined-type">Object</span>&gt; addr = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">Object</span>,<span class="predefined-type">Object</span>&gt;();
person.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">person/name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Sam</span><span class="delimiter">&quot;</span></span>);
person.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">person/age</span><span class="delimiter">&quot;</span></span>, <span class="integer">22</span>);
person.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">person/address</span><span class="delimiter">&quot;</span></span>, addr);
addr.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">address/street</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if you were doing it the "right way", one might argue it would look like this (even this is shorter than what most Java programmers would write):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">class</span> <span class="class">Person</span> {
  <span class="directive">public</span> <span class="predefined-type">String</span> name;
  <span class="directive">public</span> <span class="type">int</span> age;
  <span class="directive">public</span> Address address;

  <span class="directive">public</span> Person(<span class="predefined-type">String</span> name, <span class="predefined-type">String</span> age) {
    <span class="local-variable">this</span>.name = name;
    <span class="local-variable">this</span>.age = age;
  }

  <span class="directive">public</span> <span class="type">void</span> setAddress(Address a) {<span class="local-variable">this</span>.address = a;}
}

<span class="type">class</span> <span class="class">Address</span> {
  <span class="directive">public</span> <span class="predefined-type">String</span> street;

  <span class="directive">public</span> Address(<span class="predefined-type">String</span> street) { <span class="local-variable">this</span>.street = street; }
}

...

Person p = <span class="keyword">new</span> Person(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sam</span><span class="delimiter">&quot;</span></span>, <span class="integer">22</span>);
Address a = <span class="keyword">new</span> Address(<span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main</span><span class="delimiter">&quot;</span></span>);
p.address = a;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words, in languages like Java you have to "pre-define" what your data will look like in great detail (what everything will be named and what type it will have). This results in quite an explosion of detail that the programmer must write just to create some simple nested data! The other problem is that it lacks flexibility. You have to go back and change the definition if you happen to need to carry around some extra fact. Whereas in Clojure you can just put it in there whenever the need arises:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">assoc</span> person <span class="symbol">:person/salary</span> <span class="integer">10300</span>)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_some_examples"><a class="anchor" href="#_some_examples"></a><a class="link" href="#_some_examples">1.5.1. Some Examples</a></h4>
<div class="paragraph">
<p>One of the main tasks in programming is translating what you want in the real world into something that you can work on in a computer. In Clojure the ease of data nesting usually makes this relatively easy.</p>
</div>
<div class="paragraph">
<p>If you need a collection of named values, you use a map.</p>
</div>
<div class="paragraph">
<p>If you need a sequential collection of arbitrary things, you typically use a vector.</p>
</div>
<div class="paragraph">
<p>If you need to ensure that a collection of arbitrary things is unique you usually use a set.</p>
</div>
<div class="paragraph">
<p>For example, here&#8217;s how you might represent a profile for a person in a dating app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:member/id</span> <span class="integer">902</span>
 <span class="symbol">:member/alias</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Happy Singer</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:member/gender</span> <span class="symbol">:male</span>
 <span class="symbol">:member/birth-year</span> <span class="integer">2000</span>
 <span class="symbol">:member/seeking</span> #{<span class="symbol">:friends</span> <span class="symbol">:activity-partner</span>}
 <span class="symbol">:member/messages</span> [{<span class="symbol">:message/time</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">12:31pm</span><span class="delimiter">&quot;</span></span>
                    <span class="symbol">:message/recipient</span> {<span class="symbol">:member/id</span> <span class="integer">42</span>}
                    <span class="symbol">:message/content</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi, how are you?</span><span class="delimiter">&quot;</span></span>} <span class="keyword">..</span><span class="keyword">.</span>]
 <span class="symbol">:member/interests</span> #{{<span class="symbol">:interst/label</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">singing</span><span class="delimiter">&quot;</span></span>} {<span class="symbol">:interest/label</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">dancing</span><span class="delimiter">&quot;</span></span>}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we use sets for "seeking" and "interests" because it would be silly to accidentally claim you&#8217;re seeking "friends" and "friends", or that you&#8217;re interested in "singing", "dancing", and "singing". But, we choose a vector for the message history, since no two messages will be completely identical (they happen over time), and we often want to review them in that order.</p>
</div>
<div class="paragraph">
<p>Notice how we also use keywords for some of the "values" in the data (e.g. gender and seeking). This is a very common practice when the value of a particular thing is a limited number of values. We could use strings there, but strings take more space. We could use numbers, but numbers are difficult for us as humans to remember. Keywords again strike a nice balance between usability and efficiency.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_making_things_happen"><a class="anchor" href="#_making_things_happen"></a><a class="link" href="#_making_things_happen">1.6. Making Things Happen</a></h3>
<div class="paragraph">
<p>Now that you understand some basic ways that we store information in computers, it is important to know not only some common operations you can do to this data, but also how to invent your own ways of manipulating data.</p>
</div>
<div class="sect3">
<h4 id="_the_origins_of_programming_notation"><a class="anchor" href="#_the_origins_of_programming_notation"></a><a class="link" href="#_the_origins_of_programming_notation">1.6.1. The origins of programming notation</a></h4>
<div class="paragraph">
<p>Computer science is considered a branch of applied mathematics, so it makes sense that a lot of the things we end up typing into computers have their origins in math. However, in the early days computers could not show things like \$\int_0^100 x^2\$, so the notations usually rely on just what is found on a standard keyboard.</p>
</div>
<div class="paragraph">
<p>From a mathematician&#8217;s perspective, the idea of taking a logical step is often written as an equation</p>
</div>
<div class="stemblock">
<div class="content">
\$y = m*x + b\$
</div>
</div>
<div class="paragraph">
<p>of course the way we work with this as algebra students is that someone hands us values for <code>m</code>, <code>x</code>, and <code>b</code>, and we punch those numbers into a calculator and get an answer.</p>
</div>
<div class="paragraph">
<p>When you studied this, you probably also remember that <code>m</code> and <code>b</code> are often "known values", so that <code>x</code> is the only input. When you have this situation, you commonly write something like:</p>
</div>
<div class="stemblock">
<div class="content">
\$f(x) = 12 * x + 42\$
</div>
</div>
<div class="paragraph">
<p>which essentially says "If you are given a value for <code>x</code>, here is how you would compute \$f(x)\$."</p>
</div>
<div class="paragraph">
<p>In mathematics this assertion of equality is known as an equation, and technically it works both ways because of that equality. In other words, if I tell you \$f(x)\$ is 54, then you can use the rules of algebra to find the value of <code>x</code> that must be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adapting_to_programming"><a class="anchor" href="#_adapting_to_programming"></a><a class="link" href="#_adapting_to_programming">1.6.2. Adapting to Programming</a></h4>
<div class="paragraph">
<p>When you are defining operations for a computer the end result needs to be a sequence of things that the computer can actually do. CPUs are basically not capable of much beyond moving numbers around and doing simple arithmetic.</p>
</div>
<div class="paragraph">
<p>This means that there will, by simple necessity, be a difference between a "mathematical function written as a statement of equality and logical truth"  and a computer function which is a thing you type in to tell a computer a sequence of steps to take.</p>
</div>
<div class="paragraph">
<p>For example, when programming in some languages you might see this seemingly puzzling thing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">i = i + <span class="integer">1</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>clearly this cannot possibly be a mathematical statement of "truth" because it is patently <strong>false</strong> in the mathematical equation sense. There is no number that would even work.</p>
</div>
<div class="paragraph">
<p>Instead, the <code>=</code> is actually treated as an operation that means "Copy the result of the stuff on the right into the space on the left". It is a low-precedence operation (like in algebra where <code>*</code> goes first, then <code>+</code>. You can think of <code>=</code> as a copy operation that always goes last).</p>
</div>
<div class="paragraph">
<p>So, the expression above gets interpreted into the following (abstract) CPU instructions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">READ the value of i from memory
ADD <span class="integer">1</span> to that value
STORE the result back in i</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now what about writing functions? Well, In some computer languages the mathematical notation is borrowed quite closely. For example in Haskell you could write the above math equation as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="haskell">f x = 12 * x + 42</code></pre>
</div>
</div>
<div class="paragraph">
<p>though you are still not specifically stating a truth that the program can "work backwards" on (I can&#8217;t ask Haskell to compute x if I give it f(x)). The notation is simply a convenient way of letting the programmer write something close to familiar. The end result is still the generaion of some code that takes <code>x</code> as <strong>input</strong> and gives the calculation as <strong>output</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There are <a href="https://en.wikipedia.org/wiki/List_of_computer_algebra_systems">Computer Algebra Systems</a> that <strong>do</strong> allow you to write real mathematical statements which can then be abstractly manipulated or solved in the mathematical sense. These are not considered "general purpose" programming languages for general software development because they are not very useful for that task. Most programs need to essentially generate sequences of computational steps that lead to a targeted result, and having to state that process in pure mathematics would often be <strong>very</strong> difficult.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In Clojure, programs are always written using data structure, so the notation is a little different just because we have to encode the program <strong>itself</strong> as data (functions are defined using lists and vectors):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">f</span> [x]
  (<span class="keyword">+</span> (<span class="keyword">*</span> <span class="integer">12</span> x) <span class="integer">42</span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>defn</code> is meant to be read as "Define a function". So you&#8217;d read the entire first line as "Define a function named <code>f</code>, which takes a single parameter that we&#8217;ll call <code>x</code>…"</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Can you think of some good reasons why encoding a program as data might be advantageous?</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Clojure a raw list (something surrounded by regular parentheses) is a request for action. The first thing in a list is always the "action to take" and the remaining items in the list are the data to be passed into the function. Back in the data section you noticed that in order to create a list we had to say <code>(list 1 2 3)</code>. Technically, this is a list that Clojure is running, and the operation <code>list</code> means "make a list". This is the main difference between Clojure programs as <strong>data structures</strong> and the programming languages runtime evaluation of the data structures. A raw list in Clojure is explicitly defined as the way to "make things happen".
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Try running <code>(1 2 3)</code> in a REPL. What happens? Explain this result to the best of your ability.</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Try running <code>({:x 1} :x)</code> in a REPL. What happens? Given what you&#8217;ve learned so far, what would you say about maps in Clojure?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Same as the prior question, but try running <code>(:x {:x 1})</code> instead. What does this say about keywords?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>What do you suppose will happen if you replace the map with a vector, and :x with a number? E.g. <code>([4 5 6] 0)</code>. Try it (in both orders). What does this say about vectors and integers?</p>
</dd>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Any theories on how sets might behave? Give it a shot!</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In Javascript it would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">f</span>(x) {
  <span class="keyword">return</span> <span class="integer">12</span> * x + <span class="integer">42</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and in Java/C/C++:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">double</span> f(<span class="type">double</span> x) {
    <span class="keyword">return</span> <span class="integer">12</span> * x + <span class="integer">42</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>notice that in this last version has to specifically declare that the function itself will evaluate to a double (that&#8217;s what the <code>double</code> in front is saying), and you have to say what kind of data the <code>x</code> is.</p>
</div>
<div class="paragraph">
<p>These last two definitions also use the special word <code>return</code> in them. In these programming languages the code in a function must explicitly say when it is done and wants to send back a value. If the function "ends" without a return, then it is considered an error and the program will not work. Similarly, this is nonsensical:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="predefined-type">int</span> f(<span class="predefined-type">int</span> x) {
  <span class="keyword">return</span> x;
  x + <span class="integer">1</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>because the return exits the function, and the last statement is "unreachable".</p>
</div>
<div class="paragraph">
<p>So these languages tend to more heavily expose the fact (to the programmer) that they are actually a way of asking the computer to take some steps to perform a calculation. "Take a double precision floating point number, and call it x, then mutiply it by 12, and add 42. Then return that result the caller."</p>
</div>
<div class="paragraph">
<p>Languages like Haskell and Clojure use a notation that treats functions a little more like the mathematical construct, where the expression itself becomes the "result" of the function.</p>
</div>
<div class="paragraph">
<p>Technically, in Clojure, the <strong>last</strong> expression inside the function becomes its value. For example, this is legal (though silly):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">f</span> [x]
  x
  (<span class="keyword">+</span> x <span class="integer">1</span>)
  (<span class="keyword">+</span> (<span class="keyword">*</span> x <span class="integer">12</span>) <span class="integer">42</span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first two <em>forms</em> (<code>x</code> and <code>(+ x 1)</code>) are understood by the language, but they are not the "last" form in the body of the function, so they are essentially useless noise that might be computed, but have no other effect because their values are never seen/used.</p>
</div>
<div class="paragraph">
<p>By the way, the definition of a <em>form</em> in Clojure is a structurally complete unit of code, which is contextual. For example a simple name like <code>x</code> or the symbol <code>defn</code> are forms. But so is the vector <code>[x]</code> (because it has matching open and close brackets). So, one would say that the body of <code>f</code> above contains 3 forms. The first form is a simple symbol, the second is a list containing three sub-forms, and the last one is a form that contains 3 forms, the middle of which is a form that has 3 subforms.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>If the values of the first two forms in the body of <code>f</code> are not used as part of the "answer" of the function, why can we even put them there?</p>
</dd>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What are the various "forms" in the following expression? Hint, there are 6.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">+</span> (<span class="keyword">*</span> x y))</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Since we are focusing on Clojure, we also want to mention that functions can be treated as values. That is to say they can be used as an argument to another function, or even returned from a function. As such, there is a way to "create a function" that has no name, and is created on-the-fly. Basically you just drop the <code>de</code> of <code>defn</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">fn</span> [x] (<span class="keyword">+</span> (<span class="keyword">*</span> x <span class="integer">12</span>) <span class="integer">42</span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a very odd thing to do all by itself (with what you know so far), but we can still give such things a reusable name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">def</span> <span class="function">f</span> (<span class="keyword">fn</span> [x] (<span class="keyword">+</span> (<span class="keyword">*</span> x <span class="integer">12</span>) <span class="integer">42</span>)))</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The above is, in fact, nearly exactly what <code>defn</code> does. It&#8217;s just a bit noisy. If you review the exercises from the data structures, you&#8217;ll remember that the <code>update</code> function could take an arbitrary operation when working on a map entry.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Given our definition of <code>f</code>, what do you think this does?</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(update {<span class="symbol">:x</span> <span class="integer">2</span>} <span class="symbol">:x</span> f)</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Functions like <code>update</code> are referred to as <em>higher-order</em> functions. A higher-order function is just a function that accepts a function as a <em>parameter</em>, and/or <em>returns</em> a function as its result.</p>
</div>
<div class="paragraph">
<p>If we were talking about this with mathematics, one might write:</p>
</div>
<div class="stemblock">
<div class="content">
\$f(g)(x) = 3 * g(x)\$
</div>
</div>
<div class="paragraph">
<p>where the expectation is that one might define some function <code>g</code> and value <code>x</code> for which the equation then takes effect.</p>
</div>
<div class="stemblock">
<div class="content">
\$"Let " g(x) = x + 5", then"\$
<br>
\$f(g)(10) = 18\$
</div>
</div>
<div class="paragraph">
<p>We can express this exact thing in Clojure as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">f</span> [g x]
  (<span class="keyword">*</span> <span class="integer">3</span> (g x)))

(<span class="keyword">let</span> [g (<span class="keyword">fn</span> [x] (<span class="keyword">+</span> x <span class="integer">5</span>))]
  (f g <span class="integer">10</span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s another interesting example. Say we wanted a function that would <em>generate</em> new functions for the slope-intercept equation (\$f(x) = m*x+b\$). In other words we want to give the inputs <code>m</code> and <code>b</code>, and get back a function that can be used to calculate points on a line.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">BONUS</dt>
<dd>
<p>Try writing the function described above before looking at the answer below.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The answer is that we make a function whose <strong>result</strong> is an anonymous function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">line-equation</span> [m b]
  (<span class="keyword">fn</span> [x] (<span class="keyword">+</span> (<span class="keyword">*</span> m x) b)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then we can use it to make new functions like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">def</span> <span class="function">line1</span> (line-equation <span class="integer">10</span> <span class="integer">30</span>))
(<span class="keyword">def</span> <span class="function">line2</span> (line-equation <span class="integer">5</span> <span class="integer">12</span>))

(line1 <span class="integer">30</span>) <span class="comment">; compute the y for x = 30 of y = 10x + 30.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or even:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">((line-equation <span class="integer">2</span> <span class="integer">4</span>) <span class="integer">9</span>)</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Explain what the above expression does.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Higher-order functions are the bread and butter of programming in languages like Clojure.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Given the above definitions, what would this do?</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(update {<span class="symbol">:x</span> <span class="integer">1</span>} <span class="symbol">:x</span> line1)</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Most programming languages these days have the ability to create and use higher-order functions. Technically even many of the older ones do as well, though it was considered a much more advanced and difficult technique. The idea has been around since pretty much the early days of computing, but in those days the languages that advocated their use were slow and impractical. Advances in computer science and computer hardware have made the definition and use of higher-order functions a much more mainstream practice, and you&#8217;ll regularly see them in Java, Javascript, Typescript, and other mainstream languages.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functional_programming_workhorses"><a class="anchor" href="#_functional_programming_workhorses"></a><a class="link" href="#_functional_programming_workhorses">1.7. Functional Programming Workhorses</a></h3>
<div class="paragraph">
<p>Functional programming languages leverage the idea of sequences quite a bit. Sequences
of operations, sequences of values, etc. The actual underlying data structure could
be an array, a linked list, a map, or really anything that can be turned into items that
come one after another.</p>
</div>
<div class="paragraph">
<p>When you have such a sequence of values you will be surprised at how many different problems
can be solved by a very small number of programming language primitives. By far the
most important are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">map</dt>
<dd>
<p>An operation that converts one sequence into a different sequence of exactly the same length as
the original.</p>
</dd>
<dt class="hdlist1">filter</dt>
<dd>
<p>An operation that returns a new sequence of just the elements of the input sequence that
match some condition.</p>
</dd>
<dt class="hdlist1">reduce</dt>
<dd>
<p>An operation that combines the elements of the sequence together into a single final result.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_mapping_a_sequence"><a class="anchor" href="#_mapping_a_sequence"></a><a class="link" href="#_mapping_a_sequence">1.7.1. Mapping a sequence</a></h4>
<div class="paragraph">
<p>Mapping a sequence is a very simple operation that can be described like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/mapseq.png" alt="mapseq" width="350" height="168">
</div>
</div>
<div class="paragraph">
<p>where the down-pointing arrows are defined as a function that can convert the values
in the top sequence to the values in the bottom. There are <strong>no</strong> restrictions
on what this function does. For example, it could nest the values from the top into
complex data structures, and thus the result would be a sequence of these
new complex data structures.</p>
</div>
<div class="sect4">
<h5 id="_clojure_example"><a class="anchor" href="#_clojure_example"></a><a class="link" href="#_clojure_example">Clojure Example</a></h5>
<div class="paragraph">
<p>So, say you wanted to create a sequence of Clojure maps that look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">[{<span class="symbol">:x</span> <span class="integer">1</span> <span class="symbol">:y</span> <span class="integer">2</span>}
 {<span class="symbol">:x</span> <span class="integer">2</span> <span class="symbol">:y</span> <span class="integer">3</span>}
 {<span class="symbol">:x</span> <span class="integer">3</span> <span class="symbol">:y</span> <span class="integer">4</span>}
 {<span class="symbol">:x</span> <span class="integer">4</span> <span class="symbol">:y</span> <span class="integer">5</span>}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>you might notice that the y value is always just one more than the x. So, if you create a simple
sequence of numbers, you can use <code>map</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">map</span>
  (<span class="keyword">fn</span> [n] {<span class="symbol">:x</span> n <span class="symbol">:y</span> (<span class="keyword">+</span> <span class="integer">1</span> n)})
  [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span> <span class="integer">4</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>It turns out that clojure can accept more than one sequence for map, and you can just increase
the number of arguments to the function. In this case ALL the sequences are walked together,
giving the corresponding elements to the function. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">map</span>
  (<span class="keyword">fn</span> [item-from-a item-from-b]
    (<span class="keyword">+</span> item-from-a item-from-b))
  [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>]
  [<span class="integer">10</span> <span class="integer">11</span> <span class="integer">12</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>results in the sequence 11, 13, 15.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_filtering_a_sequence"><a class="anchor" href="#_filtering_a_sequence"></a><a class="link" href="#_filtering_a_sequence">1.7.2. Filtering a Sequence</a></h4>
<div class="paragraph">
<p>Very often an input sequence will contain values that you want, and those you do not. The point of
filtering a sequence therefore is defined to look basically like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/img/filterseq.png" alt="filterseq" width="350" height="168">
</div>
</div>
<div class="paragraph">
<p>the output sequence is still a sequence, it is just a "selection" of items from the original.</p>
</div>
<div class="sect4">
<h5 id="_clojure_example_2"><a class="anchor" href="#_clojure_example_2"></a><a class="link" href="#_clojure_example_2">Clojure Example</a></h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">filter</span> (<span class="keyword">fn</span> [n] (<span class="keyword">odd?</span> n)) [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span> <span class="integer">4</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">[<span class="integer">1</span> <span class="integer">3</span>]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reducing_a_sequence"><a class="anchor" href="#_reducing_a_sequence"></a><a class="link" href="#_reducing_a_sequence">1.7.3. Reducing a Sequence</a></h4>
<div class="paragraph">
<p>Reduce is a real powerhouse operation. Mathematically, the idea is very simple. The inputs
are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A starting value.</p>
</li>
<li>
<p>A function that can combine two values into one.</p>
</li>
<li>
<p>A sequence of additional values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The operation then proceeds as follows. Let <code>start</code> be the starting value. Let \$S_n\$ be the
nth element of the additional values. Let \$V_n\$ be the (internal temporary) value of the
reduction (so far). Then, the reduction of m elements looks like this:</p>
</div>
<div class="stemblock">
<div class="content">
\$V_1 = "combine"("start", S_1)\$
<br>
\$V_2 = "combine"(V_1, S_2)\$
<br>
\$V_3 = "combine"(V_2, S_3)\$
<br>
\$V_m = "combine"(V_{m-1}, S_m)\$
</div>
</div>
<div class="paragraph">
<p>For example, let&#8217;s say the <code>combine</code> function was addition, the
starting value was 0, and the sequence was  4, 5, 6. The reduction would be:</p>
</div>
<div class="stemblock">
<div class="content">
\$4 = add(0, 4)\$
<br>
\$9 = add(4, 5)\$
<br>
\$15 = add(9, 6)\$
</div>
</div>
<div class="paragraph">
<p>so the answer of the reduction would be 15.</p>
</div>
<div class="paragraph">
<p>The sequence values can be <strong>anything</strong>, as can the <strong>operation</strong> (as long as the operation can
successfully combine the two things it receives, and returns something that can
be used as the first argument of the combine operation on the next step).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The result is a single <strong>thing</strong>, but that <strong>thing</strong> can be anything (e.g. a collection, primitive, etc.)
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_clojure_example_3"><a class="anchor" href="#_clojure_example_3"></a><a class="link" href="#_clojure_example_3">Clojure Example</a></h5>
<div class="paragraph">
<p>In Clojure the <code>reduce</code> function takes the combine operation, the starting value, then the sequence.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">reduce</span>
  (<span class="keyword">fn</span> [a b] (<span class="keyword">+</span> a b))
  <span class="integer">0</span>
  [<span class="integer">4</span> <span class="integer">5</span> <span class="integer">6</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>but since <code>+</code> is already a function that can take two arguments, you can shorten this to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">reduce</span> <span class="keyword">+</span> <span class="integer">0</span> [<span class="integer">4</span> <span class="integer">5</span> <span class="integer">6</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>because the starting value and result can be anything, it is actually possible to
use <code>reduce</code> to build up new sequences.</p>
</div>
<div class="paragraph">
<p>To demonstrate this we&#8217;ll tell you about the <code>conj</code> function. This function
just adds an element to the end of a vector. For example,
<code>(conj [] 1)</code> &#8658; <code>[1]</code> and <code>(conj [1] 2)</code> &#8658; <code>[1 2]</code>, <code>(conj [1 2] 3)</code> &#8658; <code>[1 2 3]</code> etc.</p>
</div>
<div class="paragraph">
<p>So we can use this to have reduce actually build a sequence:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">reduce</span>
  (<span class="keyword">fn</span> [a b]
    (<span class="keyword">conj</span> a (<span class="keyword">+</span> <span class="integer">1</span> b)))
  []
  [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>])</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>What is the output of the example? What have you seen before that this is equivalent to?</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decomposing_problems"><a class="anchor" href="#_decomposing_problems"></a><a class="link" href="#_decomposing_problems">1.8. Decomposing Problems</a></h3>
<div class="paragraph">
<p>Now that you&#8217;ve learned the basic data and structures you&#8217;re ready to start learning how to represent things in the real world. This is really the heart of programming with a language like Clojure: Decide what you need to represent, and how to organize that data for straightforward use.</p>
</div>
<div class="paragraph">
<p>In my opinion, other languages which have a lot of syntax around this end up distracting you with the programming language <strong>itself</strong>. It can become hard to think about your problem because the data itself becomes overly complected with the notation of programming.</p>
</div>
<div class="paragraph">
<p>In general, though, the approach to creating a program is to compose small bits together until you reach the solution, but you might actually find it useful to start that thinking from "one end or the other":</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you understand the large problem, you will sometimes decompose it into smaller and smaller chunks until you find units that you can reason about at the level of simple data, or a simple function. Then you write those small bits and compose them into larger ones.</p>
</li>
<li>
<p>If you&#8217;re exploring the space you might <strong>start</strong> with the small bits you understand already, and build on that until you reach your target.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In either case you need to find tractable things to build. You can&#8217;t possibly attack the entire problem at once except for trivial programs. It&#8217;s all divide an conquer.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_modelling"><a class="anchor" href="#_data_modelling"></a><a class="link" href="#_data_modelling">2. Data Modelling</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The basics of programming now boil down to just a few steps. In any given problem you can "take a picture" of what a given point in time might look like for your program. Some point in time is the <strong>data</strong> of your program. Constructing a <strong>series</strong> of these points in time is the purpose of <strong>code</strong>. So, take a simple function like we had in the exercises for computing points on some line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">y</span> [x] (<span class="keyword">+</span> (<span class="keyword">*</span> <span class="integer">2</span> x) <span class="integer">10</span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>when we give a single instruction <code>(y 5)</code>, the <code>5</code> is the only data we are carrying around. The instructions to do some math on it is code. There really isn&#8217;t a time sequence in this case (unless you consider the temporary unnamed states the the computer goes through as it executes "multiply by 2" "add 10").</p>
</div>
<div class="paragraph">
<p>More interesting programs have quite a bit more data than this. Let&#8217;s say you&#8217;re creating characters for a game. The objective is to capture as wide a view as possible for all of the possible things that character might need anywhere along the timeline of a game. For example, do they acquire objects/possessions? Do they have relationships to other characters?</p>
</div>
<div class="paragraph">
<p>Some basic rules of how to assemble this data are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a map to hold related key-value pairs.</p>
</li>
<li>
<p>If a value can have many members (e.g. inventory, skills, team mates), you&#8217;ll <strong>might</strong> want any one of the possible collections:</p>
<div class="ulist">
<ul>
<li>
<p>Set: Use a set when the values must not be duplicated, or if it is important to detect the presence of a value.</p>
</li>
<li>
<p>Map: Similar to a set (since keys are unique), but in this case you need a nested for each unique thing.</p>
</li>
<li>
<p>Vector: In cases where you want to establish a stable order, or might have duplicates.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>So a first draft of a character might look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:character/skills</span> #{ {<span class="symbol">:skill/type</span> <span class="symbol">:archery</span> <span class="symbol">:skill/level</span> <span class="integer">1</span>}
                      {<span class="symbol">:skill/type</span> <span class="symbol">:stealth</span> <span class="symbol">:skill/level</span> <span class="integer">4</span>}}
 <span class="symbol">:character/inventory</span> [{<span class="symbol">:weapon/type</span> <span class="symbol">:sword</span>} {<span class="symbol">:weapon/type</span> <span class="symbol">:sword</span>} {<span class="symbol">:weapon/type</span> <span class="symbol">:dagger</span>} {<span class="symbol">:armor/type</span> <span class="symbol">:plate</span>}]
 <span class="symbol">:character/sidekick</span> {<span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span>
                      <span class="symbol">:character/inventory</span> [{<span class="symbol">:weapon/type</span> <span class="symbol">:pointy-stick</span>} {<span class="symbol">:armor/type</span> <span class="symbol">:eye-patch</span>]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and so on. As you work on the data, you&#8217;ll find that certain initial choices do not work well for some reason. This is very common, and it is a good idea to think about how the data will be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Does an element change over time? Is your choice for it easy and efficient to access and modify?</p>
</li>
<li>
<p>Might the element appear in more than one place at a time?</p>
<div class="ulist">
<ul>
<li>
<p>Consider a deduplication strategy, especially if it changes over time.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s pick apart some problems with our first draft with these in mind.</p>
</div>
<div class="sect2">
<h3 id="_changes_over_time"><a class="anchor" href="#_changes_over_time"></a><a class="link" href="#_changes_over_time">2.1. Changes over Time</a></h3>
<div class="paragraph">
<p>When some element changes over time, it can be really inconvenient to update it if it has to be searched for with some kind of algorithm. For example, let&#8217;s say our character is going to level up in archery. There&#8217;s no clean "path" to that skill. It&#8217;s a thing in a set, which means to change it we would have to first remove the old thing from the set, and then put the new thing back into the set.  But in order to remove it we first have to find it. Quite a lot of work.</p>
</div>
<div class="paragraph">
<p>Most likely, we&#8217;ll want to access skills by their skill type, so perhaps this would be better:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/skills</span> {<span class="symbol">:archery</span> {<span class="symbol">:skill/type</span> <span class="symbol">:archery</span>
                              <span class="symbol">:skill/level</span> <span class="integer">1</span>}
                    <span class="symbol">:stealth</span> {<span class="symbol">:skill/type</span> <span class="symbol">:stealh</span>
                              <span class="symbol">:skill/level</span> <span class="integer">4</span>}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Skill levels now have a clear path, so raising archery&#8217;s level is just <code>(update-in character [:character/skills :archery :skill/level] inc)</code>.</p>
</li>
<li>
<p>We still put the skill type in the skill map. This is just a good practice, because at some point you&#8217;ll probably want to display a skill, and
it will pay to be able to write a function that can just accept the particular skill as a map.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">show-skill</span> [skill] <span class="keyword">..</span><span class="keyword">.</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we look at inventory, perhaps we&#8217;d just it to be OK. What you are carrying is typically just a bunch of stuff, and you might have duplicate items. However, note that another possible way to set up inventory would be by the category, type, and then a map of details. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/inventory</span> {<span class="symbol">:weapons</span> {<span class="symbol">:sword</span> {<span class="symbol">:item/count</span> <span class="integer">2</span>}
                                 <span class="symbol">:dagger</span> {<span class="symbol">:item/count</span> <span class="integer">1</span>}
                       <span class="symbol">:armor</span>   {<span class="symbol">:plate</span> {<span class="symbol">:item/count</span> <span class="integer">1</span>}}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>now think about how these things might evolve over time. Can a sword break? Can it get dull? Can armor get damaged? I think the answer to all of these is probably "yes", then this is not an improvement. There&#8217;s no way, in this particular scheme, so easily say <strong>which</strong> sword is dull. Each item actually needs it&#8217;s own map, because items may change individually in the world. Folding them into something with a count, in this case, is a bad idea.</p>
</div>
<div class="paragraph">
<p>But this points out another problem with the original draft. How can I tell the two swords apart??? If I just find the first one in the inventory, and say "OK, you&#8217;re duller now", I&#8217;m choosing one at random. Perhaps it&#8217;s the wrong one? How would I know.</p>
</div>
<div class="paragraph">
<p>In the real world you&#8217;d get out your handy label printer and name your item, right? Or stamp it with some serial number. We need some kind of identity to keep track of which is which.</p>
</div>
</div>
<div class="sect2">
<h3 id="_identity"><a class="anchor" href="#_identity"></a><a class="link" href="#_identity">2.2. Identity</a></h3>
<div class="paragraph">
<p>So, as we&#8217;re building our data, we&#8217;ve now run into the problem of needing to clearly identify one thing from another. At a glance we might see our character map and think "Oh, that&#8217;s Vlad", because we see their name.  In the real world the identity of a thing can seem pretty concrete, but what happens when Vlad decides to transition to be Susan?  It&#8217;s still the same character, but some of its attributes have changed.</p>
</div>
<div class="paragraph">
<p>The problem of keeping track of distinct individual things when any arbitrary single thing about them might change is a problem we deal with every day. Its why you have an ID number on your ID card. It&#8217;s why credit cards have long numbers on them, etc.  The easiest way to keep track of something is to assign it an ID that has <strong>nothing at all</strong> to do with the data it is identifying. That way there&#8217;s never any need to change it. An ID that is unique at least for a given <strong>kind</strong> of thing (character, weapon, armor) makes it much easier to deal with a number of issues.</p>
</div>
<div class="paragraph">
<p>Note that the ID need not be globally unique. We could have weapon with ID 1, armor with ID 1, and even a character with ID 1. A globally unique ID <strong>can</strong> be set up and used, and it has only one real advantage: A globally unique ID can be used to find any <strong>kind</strong> of thing. The downside of that, though, is that if you have the ID, you have <strong>no idea</strong> about what it is the ID of until you look it up.</p>
</div>
<div class="paragraph">
<p>So, generally when representing the data in our programs we will only try to ensure that IDs are unique for each different <strong>kind</strong> of information. We&#8217;ll have more to say on this in a bit.</p>
</div>
<div class="paragraph">
<p>For now, let&#8217;s see if we can think of more ways to lay out our inventory so that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We can have more than one of the same <strong>kind</strong> of thing</p>
</li>
<li>
<p>Each individual item has a distinct identity, so it can evolve independently</p>
</li>
<li>
<p>We can update a given item via a path we can imagine knowing</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>What if we just start by given each inventory item a type and an ID:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:item/id</span> <span class="integer">1</span>
 <span class="symbol">:item/type</span> <span class="symbol">:weapon</span>
 <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Destiny</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:weapon/damage</span> <span class="integer">2</span>
 <span class="symbol">:weapon/condition</span> <span class="symbol">:sharp</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>so here we&#8217;ve chosen to also leverage the "namespace" of the keywords to accomplish another goal: Sometimes we just want to know what is in inventory in general. So, the <code>:item/&#8230;&#8203;</code> keys can be used for anything, like <code>:item/type :coin</code> or <code>:item/type :armor</code>. Once we know it is a weapon, then we can look for weapon-specific facts about the item.</p>
</div>
<div class="paragraph">
<p>Now, if we know a character is carrying item with ID 1, and they just spent a few minutes banging it against a rock, and it looks to be an edged weapon, then we&#8217;ll want to modify the condition it is in.</p>
</div>
<div class="paragraph">
<p>Perhaps we create a map for inventory, and KEY it by the ID of each item:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span> <span class="integer">1</span>
 <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sally</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:character/inventory</span> {<span class="integer">1</span> {<span class="symbol">:item/id</span> <span class="integer">1</span> <span class="keyword">..</span><span class="keyword">.</span>}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>now modifying the condition of "item 1" is just something like an <code>(assoc-in character [:character/inventory 1 :weapon/condition] :dull)</code>. Of course the logic of the program would somehow have to figure out that the item is a weapon, but since you know where it is, it&#8217;s easy enough to pull the data and look at all the attributes.</p>
</div>
<div class="paragraph">
<p>This is a big improvement, but there&#8217;s another case to consider.  With inventory, the character "owns" the item. That is to say the item should not appear in anyone else&#8217;s inventory. But what about sidekicks?</p>
</div>
<div class="paragraph">
<p>If we followed what we know so far, we might have a draft of our character that looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span>   <span class="integer">1</span>
 <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sally</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:character/skills</span>  {<span class="symbol">:archery</span> {<span class="symbol">:skill/type</span> <span class="symbol">:archery</span>
                               <span class="symbol">:skill/level</span> <span class="integer">1</span>}
                     <span class="symbol">:stealth</span> {<span class="symbol">:skill/type</span> <span class="symbol">:stealh</span>
                               <span class="symbol">:skill/level</span> <span class="integer">4</span>}}
 <span class="symbol">:character/inventory</span>  {<span class="integer">1</span> {<span class="symbol">:item/id</span> <span class="integer">1</span>
                           <span class="symbol">:item/type</span> <span class="symbol">:weapon</span>
                           <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Destiny</span><span class="delimiter">&quot;</span></span>
                           <span class="symbol">:weapon/damage</span> <span class="integer">2</span>
                           <span class="symbol">:weapon/condition</span> <span class="symbol">:sharp</span>}}
 <span class="symbol">:character/sidekick</span> {<span class="symbol">:character/id</span> <span class="integer">2</span>
                      <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span>
                      <span class="symbol">:character/inventory</span> {<span class="integer">1</span> {<span class="symbol">:item/id</span> <span class="integer">2</span>
                                               <span class="symbol">:item/type</span> <span class="symbol">:pointy-stick</span>
                                               <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Eye Gouger</span><span class="delimiter">&quot;</span></span>
                                               <span class="symbol">:weapon/damage</span> <span class="integer">1</span>
                                               <span class="symbol">:weapon/condition</span> <span class="symbol">:pointy</span>}}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and now we have another problem. The sidekick is <strong>not</strong> really a thing that is owned by the character. Nesting it this way will cause us all sorts of problems! What if we want to break the pointy stick? It isn&#8217;t at the same kind of path as Vlad&#8217;s inventory&#8230;&#8203;we have to know to flow down the sidekick path! This is clearly a nightmare in the making, because programs with <strong>any</strong> complexity will certainly run into this case.</p>
</div>
<div class="paragraph">
<p>Not only is the path to the data bad, it&#8217;s also possible that some <strong>other</strong> character will have "Vlad Jr." as a friend:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span> <span class="integer">42</span>
 <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Doug Adams</span><span class="delimiter">&quot;</span></span>
 <span class="symbol">:character/friends</span> [{<span class="symbol">:character/id</span> <span class="integer">2</span> <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span> <span class="keyword">..</span><span class="keyword">.</span>} <span class="keyword">..</span><span class="keyword">.</span>]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we not only have a "path" problem, we also have a "duplication" one. Which of these is the real "Vlad Jr."?</p>
</div>
<div class="paragraph">
<p>How do we solve this in the real world? Well, aside from cloning, we refer to the various things in life by their name or ID. So, what if we just make a "master lookup" table for all of our characters, and then when they need to refer to each other we&#8217;ll just put their ID there?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="integer">1</span> {<span class="symbol">:character/id</span>   <span class="integer">1</span>
    <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sally</span><span class="delimiter">&quot;</span></span>
    <span class="symbol">:character/skills</span>  {<span class="symbol">:archery</span> {<span class="symbol">:skill/type</span> <span class="symbol">:archery</span>
                                  <span class="symbol">:skill/level</span> <span class="integer">1</span>}
                        <span class="symbol">:stealth</span> {<span class="symbol">:skill/type</span> <span class="symbol">:stealh</span>
                                  <span class="symbol">:skill/level</span> <span class="integer">4</span>}}
    <span class="symbol">:character/inventory</span>  {<span class="integer">1</span> {<span class="symbol">:item/id</span> <span class="integer">1</span>
                              <span class="symbol">:item/type</span> <span class="symbol">:weapon</span>
                              <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Destiny</span><span class="delimiter">&quot;</span></span>
                              <span class="symbol">:weapon/damage</span> <span class="integer">2</span>
                              <span class="symbol">:weapon/condition</span> <span class="symbol">:sharp</span>}}
    <span class="symbol">:character/sidekick</span> <span class="integer">2</span>} <span class="comment">; 2 points to Vlad Jr.</span>

 <span class="integer">2</span> {<span class="symbol">:character/id</span> <span class="integer">2</span>
    <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span>
    <span class="symbol">:character/inventory</span> {<span class="integer">2</span> {<span class="symbol">:item/id</span> <span class="integer">2</span>
                             <span class="symbol">:item/type</span> <span class="symbol">:pointy-stick</span>
                             <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Eye Gouger</span><span class="delimiter">&quot;</span></span>
                             <span class="symbol">:weapon/damage</span> <span class="integer">1</span>
                             <span class="symbol">:weapon/condition</span> <span class="symbol">:pointy</span>}}}
 <span class="integer">42</span> {<span class="symbol">:character/id</span> <span class="integer">42</span>
     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Doug Adams</span><span class="delimiter">&quot;</span></span>
     <span class="symbol">:character/friends</span> [<span class="integer">2</span>]}} <span class="comment">; 2 points to Vlad Jr.</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_normalization"><a class="anchor" href="#_normalization"></a><a class="link" href="#_normalization">2.3. Normalization</a></h3>
<div class="paragraph">
<p>This process of de-duplicating data by using references is known as <strong>normalization</strong> of the data. There&#8217;s a whole branch of computer science dedicated to the study of it in the context of databases, but the core thing that you need to understand is this idea of replacing a thing with a reference to that thing.</p>
</div>
<div class="paragraph">
<p>Now, we have one more problem to solve: we often do not use unique IDs. In our example so far we&#8217;ve been reusing numbers when the "type" of the thing in question is different. So, our references in the above draft are a bit <strong>ambiguous</strong>. We can kind of figure it out by looking at the key (e.g. we humans can guess that <code>:character/friends</code> probably points to other characters, but that isn&#8217;t going to be obvious to everyone, and it certainly won&#8217;t help the computer).</p>
</div>
<div class="paragraph">
<p>So, we have one final leap to make: What if we choose to make a reference as a vector of the <code>[ID-key ID]</code>.
Like <code>[:character/id 1]</code>. If we do that, the result would evolve to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="integer">1</span> {<span class="symbol">:character/id</span>   <span class="integer">1</span>
    <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sally</span><span class="delimiter">&quot;</span></span>
    <span class="symbol">:character/skills</span>  {<span class="symbol">:archery</span> {<span class="symbol">:skill/type</span> <span class="symbol">:archery</span>
                                  <span class="symbol">:skill/level</span> <span class="integer">1</span>}
                        <span class="symbol">:stealth</span> {<span class="symbol">:skill/type</span> <span class="symbol">:stealh</span>
                                  <span class="symbol">:skill/level</span> <span class="integer">4</span>}}
    <span class="symbol">:character/inventory</span>  {<span class="integer">1</span> {<span class="symbol">:item/id</span> <span class="integer">1</span>
                              <span class="symbol">:item/type</span> <span class="symbol">:weapon</span>
                              <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Destiny</span><span class="delimiter">&quot;</span></span>
                              <span class="symbol">:weapon/damage</span> <span class="integer">2</span>
                              <span class="symbol">:weapon/condition</span> <span class="symbol">:sharp</span>}}
    <span class="symbol">:character/sidekick</span> [<span class="symbol">:character/id</span> <span class="integer">2</span>]} <span class="comment">; clearly points to Vlad Jr.</span>

 <span class="integer">2</span> {<span class="symbol">:character/id</span> <span class="integer">2</span>
    <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span>
    <span class="symbol">:character/inventory</span> {<span class="integer">2</span> {<span class="symbol">:item/id</span> <span class="integer">2</span>
                             <span class="symbol">:item/type</span> <span class="symbol">:pointy-stick</span>
                             <span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Eye Gouger</span><span class="delimiter">&quot;</span></span>
                             <span class="symbol">:weapon/damage</span> <span class="integer">1</span>
                             <span class="symbol">:weapon/condition</span> <span class="symbol">:pointy</span>}}}
 <span class="integer">42</span> {<span class="symbol">:character/id</span> <span class="integer">42</span>
     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Doug Adams</span><span class="delimiter">&quot;</span></span>
     <span class="symbol">:character/friends</span> [[<span class="symbol">:character/id</span> <span class="integer">2</span>]]}} <span class="comment">; 2 points to Vlad Jr. Notice we have a vector of references</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ok, so now you might notice something. This proposed reference format is <strong>exactly</strong> what we use with <code>assoc-in</code> and <code>get-in</code> as a path to data. This sort of implies that it might be nice to organize our characters like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span>  {<span class="integer">1</span>  {<span class="symbol">:character/id</span> <span class="integer">1</span>
                     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad</span><span class="delimiter">&quot;</span></span>
                     <span class="keyword">..</span><span class="keyword">.</span>
                     <span class="symbol">:character/sidekick</span> [<span class="symbol">:character/id</span> <span class="integer">2</span>]}
                 <span class="integer">2</span>  {<span class="symbol">:character/id</span> <span class="integer">2</span>
                     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span>
                     <span class="keyword">..</span><span class="keyword">.</span>}
                 <span class="integer">42</span> {<span class="symbol">:character/id</span> <span class="integer">42</span>
                     <span class="symbol">:character/friends</span> [[<span class="symbol">:character/id</span> <span class="integer">2</span>]]
                     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Doug Adams</span><span class="delimiter">&quot;</span></span>}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>because now if I know the reference(s), I can just look them up against the top-level map with <code>get-in</code>! Want to make a modification to a character? It&#8217;s just something like an <code>(assoc-in m [:character/id ID :character/name] "Sally")</code>.  The paths are nice and short!</p>
</div>
<div class="paragraph">
<p>Now look at all the other nested data like skills and inventory. This same trick can be played there!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span>  {<span class="integer">1</span>  {<span class="symbol">:character/id</span> <span class="integer">1</span>
                     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad</span><span class="delimiter">&quot;</span></span>
                     <span class="symbol">:character/skills</span> [[<span class="symbol">:skill/id</span> <span class="integer">1</span>] [<span class="symbol">:skill/id</span> <span class="integer">2</span>]]
                     <span class="symbol">:character/inventory</span> [[<span class="symbol">:item/id</span> <span class="integer">1</span>] [<span class="symbol">:item/id</span> <span class="integer">2</span>]]
                     <span class="keyword">..</span><span class="keyword">.</span>
                     <span class="symbol">:character/sidekick</span> [<span class="symbol">:character/id</span> <span class="integer">2</span>]}
                 <span class="integer">2</span>  {<span class="symbol">:character/id</span> <span class="integer">2</span>
                     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Vlad Jr.</span><span class="delimiter">&quot;</span></span>
                     <span class="keyword">..</span><span class="keyword">.</span>}
                 <span class="integer">42</span> {<span class="symbol">:character/id</span> <span class="integer">42</span>
                     <span class="symbol">:character/friends</span> [[<span class="symbol">:character/id</span> <span class="integer">2</span>]]
                     <span class="symbol">:character/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Doug Adams</span><span class="delimiter">&quot;</span></span>}}
 <span class="symbol">:skill/id</span>    {<span class="integer">1</span> {<span class="symbol">:skill/id</span> <span class="integer">1</span> <span class="symbol">:skill/type</span> <span class="symbol">:archery</span> <span class="symbol">:skill/level</span> <span class="integer">1</span>}
               <span class="integer">2</span> {<span class="symbol">:skill/id</span> <span class="integer">2</span> <span class="symbol">:skill/type</span> <span class="symbol">:stealth</span> <span class="symbol">:skill/level</span> <span class="integer">4</span>}
               <span class="keyword">..</span><span class="keyword">.</span>}
 <span class="symbol">:item/id</span>     {<span class="integer">1</span> {<span class="symbol">:item/id</span> <span class="integer">1</span> <span class="keyword">..</span><span class="keyword">.</span>}
               <span class="integer">2</span> {<span class="symbol">:item/id</span> <span class="integer">2</span> <span class="keyword">..</span><span class="keyword">.</span>}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now if we want to know any fact on an entity, it is just generally <code>(get-in data [id-key id attribute-key])</code>. If we want to change some attribute it&#8217;s either an <code>assoc-in</code> or <code>update-in</code> along a similar path: <code>(assoc-in data [id-key id attribute-key] new-value)</code>.</p>
</div>
<div class="paragraph">
<p>So, this seems an overall good generalization for how to represent arbitrarily complex nested data!</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Say we wanted to add a new skill (say <code>:skill/type :charm</code>) to Vlad. What sequence of steps would you do (abstractly and/or in code)?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Now notice another thing: Once everything has a unique way of referring to it, we can now easily create other derived things as we need them. Let&#8217;s say your game has the concept of "raiding party", where you need to keep track of who is in the party. You might add a field like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:raiding-party</span> [[<span class="symbol">:character/id</span> <span class="integer">1</span>] [<span class="symbol">:character/id</span> <span class="integer">2</span>]]
 <span class="keyword">..</span><span class="keyword">.</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and now you&#8217;re tracking a list of characters for a new purpose! Perhaps the raiding party goes with some scenario, and you need to keep track of which scenario you&#8217;re working on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:current-scenario</span> [<span class="symbol">:scenario/id</span> <span class="integer">1</span>]
 <span class="symbol">:scenario/id</span>  {<span class="integer">1</span> {<span class="symbol">:scenario/raiding-party</span> [[<span class="symbol">:character/id</span> <span class="integer">1</span>] [<span class="symbol">:character/id</span> <span class="integer">2</span>]]}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>but now you think "Hey, my raiding party needs a name"&#8230;&#8203;well, turn it into a new entity with an ID!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:current-scenario</span> [<span class="symbol">:scenario/id</span> <span class="integer">1</span>]
 <span class="symbol">:scenario/id</span>  {<span class="integer">1</span> {<span class="symbol">:scenario/raiding-party</span> [<span class="symbol">:party/id</span> <span class="integer">1</span>]}}
 <span class="symbol">:party/id</span>     {<span class="integer">1</span> {<span class="symbol">:party/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">The Raiders</span><span class="delimiter">&quot;</span></span>
                   <span class="symbol">:party/members</span> [[<span class="symbol">:character/id</span> <span class="integer">1</span>] [<span class="symbol">:character/id</span> <span class="integer">2</span>]]}}
 <span class="symbol">:character/id</span> {<span class="integer">1</span> <span class="keyword">..</span><span class="keyword">.</span>}
 <span class="symbol">:skill/id</span> <span class="keyword">..</span><span class="keyword">.</span>
 <span class="keyword">..</span><span class="keyword">.</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>you can go on like this all day! The beauty of references is that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You never end up with a deeply nested data structure.</p>
</li>
<li>
<p>You don&#8217;t have duplicated facts peppered all over the place</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of course nothing is perfect. The main problem with this structure is that there it isn&#8217;t easy to answer the question "whose skill is this?" or "who has item 6 in their inventory". Fortunately, in most programs there is a clear directionality of data (e.g. in our game we&#8217;re probably mostly working directly with the characters, and walking forward from there through the references).</p>
</div>
<div class="paragraph">
<p>However, there&#8217;s nothing to say that you can&#8217;t create a "back-reference". In other words, a reference that points to the "owner" of something. For example: <code>{:item/owner [:character/id 4]}</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">QUIZ</dt>
<dd>
<p>Before reading on, try to name a problem with <strong>having</strong> back references.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To see why this isn&#8217;t commonly done, let&#8217;s see the data evolve over time. Say at one point in the game Vlad has the Sword of Destiny, which
in turn has a back-reference back to Vlad:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span> {<span class="integer">1</span> {<span class="symbol">:character/inventory</span> [[<span class="symbol">:item/id</span> <span class="integer">1</span>] <span class="keyword">..</span><span class="keyword">.</span>]}}
 <span class="symbol">:item/id</span> {<span class="integer">1</span> {<span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Destiny</span><span class="delimiter">&quot;</span></span>
              <span class="symbol">:item/owner</span> [<span class="symbol">:character/id</span> <span class="integer">1</span>]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When Vlad decides to give this sword to their sidekick, if the logic of the program isn&#8217;t perfect, it could be easy to <strong>forget</strong> to update the back reference, leading to something inconsistent like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span> {<span class="integer">1</span> {<span class="symbol">:character/inventory</span> [[<span class="symbol">:item/id</span> <span class="integer">2</span>] <span class="keyword">..</span><span class="keyword">.</span>]}
                <span class="integer">2</span> {<span class="symbol">:character/inventory</span> [[<span class="symbol">:item/id</span> <span class="integer">1</span>] <span class="keyword">..</span><span class="keyword">.</span>]}
 <span class="symbol">:item/id</span> {<span class="integer">1</span> {<span class="symbol">:item/name</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Destiny</span><span class="delimiter">&quot;</span></span>
              <span class="symbol">:item/owner</span> [<span class="symbol">:character/id</span> <span class="integer">1</span>]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>clearly character 2 now has item 1 in their inventory, but the item didn&#8217;t get updated so if you were asking the question "who owns the Sword of Destiny" the program would likely use this back-reference and give the wrong answer!</p>
</div>
<div class="paragraph">
<p>Having both forward <strong>and</strong> back references is a more nefarious "duplication" of information. In this case the information is "which character is related to an item". Having a forward and back reference means you&#8217;ve <strong>duplicated</strong> the relationship, and as you&#8217;ve seen duplication of data (especially if it can be modified) is a terrible idea.</p>
</div>
<div class="paragraph">
<p>So, generally if you need to find things "in reverse" (fortunately you rarely do), it&#8217;s usually a matter of writing code that can search for it. For example, look through all character&#8217;s inventories until you find <code>[:item/id 1]</code>. Fortunately, it isn&#8217;t all that terribly hard to write a generalized function that could do this search. But in practice it is actually much more common to simply try to model your data so that the forward references are the direction you usually want to go.</p>
</div>
</div>
<div class="sect2">
<h3 id="_de_normalization"><a class="anchor" href="#_de_normalization"></a><a class="link" href="#_de_normalization">2.4. De-normalization</a></h3>
<div class="paragraph">
<p>Sometimes you&#8217;ll find that you actually want to "walk" the forward references and replace them with the real details of the entity. E.g. you want to see the details of all of the weapons that character 1 has in inventory. The process of turning our normalized data struture into a deeply nested value for convenience is actually quite useful. This process is called de-normalization, and the basic process is quite simple. Get the data of the first thing you want. Replace any references with the data that the reference points to.</p>
</div>
<div class="paragraph">
<p>The main trick is that this process is recursive in nature. Say you want character Vlad. When you replace the sidekick reference with Vlad Jr. you suddenly have nested references to skills and inventory, etc.</p>
</div>
<div class="paragraph">
<p>The actual algorithm for doing this is beyond your abilities at this point, so this section is mainly just here so that you&#8217;ve heard the term before, and know basically what it means:</p>
</div>
<div class="paragraph">
<p>Go from this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span> {<span class="integer">1</span> {<span class="symbol">:character/skills</span> [[<span class="symbol">:skill/id</span> <span class="integer">1</span>]]}}
 <span class="symbol">:skill/id</span> {<span class="integer">1</span> {<span class="symbol">:skill/id</span> <span class="integer">1</span>
               <span class="symbol">:skill/type</span> <span class="symbol">:archery</span>
               <span class="symbol">:skill/level</span> <span class="integer">1</span>}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>to "get me a denormalized view of character 1"</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">{<span class="symbol">:character/id</span> <span class="integer">1</span>
 <span class="symbol">:character/skills</span> [{<span class="symbol">:skill/id</span> <span class="integer">1</span> <span class="symbol">:skill/type</span> <span class="symbol">:archery</span> <span class="symbol">:skill/level</span> <span class="integer">1</span>}]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In principle it&#8217;s actually quite trivial.</p>
</div>
</div>
<div class="sect2">
<h3 id="_review"><a class="anchor" href="#_review"></a><a class="link" href="#_review">2.5. Review</a></h3>
<div class="paragraph">
<p>Our study of data representation has led us to some general conclusions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When designing data for a program, a primary concern is to think about how that data will evolve over time.</p>
</li>
<li>
<p>Do our best not to duplicate data.</p>
<div class="ulist">
<ul>
<li>
<p>Give things a clear "identity". Possibilities include globally unique IDs, or at least some pair of "type/id", for example <code>[id-keyword id]</code></p>
</li>
<li>
<p>Use the identity for "referencing" instead of repeating the information.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Represent the "state of the application" using maps that:</p>
<div class="ulist">
<ul>
<li>
<p>Have an ID (so we can generate references to them)</p>
</li>
<li>
<p>Are stored at their own "reference path". E.g. <code>[:character/id 1]</code> is stored at <code>{:character/id {1 {&#8230;&#8203;}}}</code></p>
</li>
<li>
<p>Have attributes the are distinctly named to give clear meaning to the data like <code>:item/name</code> and <code>:weapon/type</code></p>
</li>
<li>
<p>Use references to refer to other entities, instead of embedding that data. E.g. <code>:character/sidekick [:character/id 2]</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>An <strong>entity</strong> is just a term for a map of key-value pairs that has some distinct <strong>identity</strong> in the universe.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-04-11 23:43:23 -0700
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>